!function(a,b){"use strict";b["true"]=a,angular.module("ya.treeview",[]).factory("YaTreeviewService",function(){var a={},b=function(a,b){return angular.isArray(a[b.childrenKey])||a[b.hasChildrenKey]||!1};return a.children=function(a,b){var c=a.$model[b.childrenKey];if(angular.isFunction(c))return c();if(angular.isArray(c))return c;throw new Error("Children is neither an array nor a function.")},a.nodify=function(c,d,e){var f={$model:c,$parent:d,$hasChildren:b(c,e),collapsed:e.collapseByDefault};return f.$hasChildren&&(f.$children=e.lazy?[]:a.nodifyArray(a.children(f,e),c,e)),f},a.nodifyArray=function(b,c,d){var e=[];return angular.forEach(b,function(b){e.push(a.nodify(b,c,d))}),e},a}).controller("YaTreeviewCtrl",["$scope","YaTreeviewService",function(a,b){var c=function(b){var c={};return b=b||{},c.childrenKey=b.childrenKey||"children",c.hasChildrenKey=b.hasChildrenKey||"has_children",c.onExpand=b.onExpand||angular.noop,c.onCollapse=b.onCollapse||angular.noop,c.onSelect=b.onSelect||angular.noop,c.onDblClick=b.onDblClick||angular.noop,c.collapseByDefault=!!b.collapseByDefault||!0,c.lazy=!!b.lazy||!1,a.context=b.context||{},d(c)},d=function(a){if(a.lazy&&!a.collapseByDefault)throw new Error("Yea, right... lazy load expanded tree...");return a},e=function(a){var c={};c[f.childrenKey]=a;var d=b.nodify(c,null,f);return f.lazy&&(d.$children=b.nodifyArray(a,c,f)),d.$hasChildren=!0,d.collapsed=!1,d};a.expand=function(c,d){if(d.$hasChildren&&0===d.$children.length){var e=b.children(d,f);d.$children=b.nodifyArray(e,d,f)}d.collapsed=!1,f.onExpand(c,d,a.context)},a.collapse=function(b,c){c.collapsed=!0,f.onCollapse(b,c,a.context)},a.selectNode=function(b,c){a.context.selectedNode=c,f.onSelect(b,c,a.context)},a.dblClick=function(b,c){f.onDblClick(b,c,a.context)};var f=c(a.options);a.node=e(a.model),a.context.nodify=function(a,c){return b.nodify(a,c,f)},a.context.nodifyArray=function(a,c){return b.nodifyArray(a,c,f)},a.context.children=function(a){return b.children(a,f)},a.$watch("model",function(b){var c=e(b);for(var d in c)c.hasOwnProperty(d)&&(a.node[d]=c[d])})}]).directive("yaTreeview",function(){return{restrict:"AE",replace:!0,transclude:!0,controller:"YaTreeviewCtrl",scope:{id:"@yaId",model:"=yaModel",options:"=yaOptions"},templateUrl:"templates/ya-treeview/treeview.tpl.html",compile:function(a,b,c){return function(a,b,d,e){e.transcludeFn=c}}}}).directive("yaNode",["$compile",function(a){return{restrict:"AE",replace:!1,scope:!1,templateUrl:"templates/ya-treeview/children.tpl.html",compile:function(b){var c=b.clone();return b.empty(),function(b,d){b.node.$hasChildren&&d.append(a(c.html())(b))}}}}]).directive("yaTransclude",function(){return{restrict:"AE",replace:!1,require:"^yaTreeview",scope:!1,template:"",link:function(a,b,c,d){d.transcludeFn(a,function(c){a.node&&b.append(c)})}}}),angular.module("ya.treeview.tpls",["templates/ya-treeview/children.tpl.html","templates/ya-treeview/treeview.tpl.html"]),angular.module("templates/ya-treeview/children.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/ya-treeview/children.tpl.html",'<ul ng-hide=node.collapsed><li class=node ng-repeat="node in node.$children"><div ng-show=node.$hasChildren><a ng-show=node.collapsed class="btn btn-link pull-left" ng-click="expand($event, node)"><i class="glyphicon glyphicon-chevron-right"></i></a> <a ng-hide=node.collapsed class="btn btn-link pull-left" ng-click="collapse($event, node)"><i class="glyphicon glyphicon-chevron-down"></i></a></div><div class=node-content ya-transclude="" ng-class="{\'node-children\': node.$hasChildren}" ng-click="selectNode($event, node)" ng-dblclick="dblClick($event, node)"></div><div ya-node="" class=ya-node></div></li></ul>')}]),angular.module("templates/ya-treeview/treeview.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/ya-treeview/treeview.tpl.html",'<div class=ya-treeview><div ya-node="" class=ya-node></div></div>')}])}({},function(){return this}());